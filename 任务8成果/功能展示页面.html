<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RBACæƒé™ç®¡ç†ç³»ç»Ÿ - å®é™…åŠŸèƒ½æ¼”ç¤º</title>
    <!-- Element Plus CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/element-plus@2.4.4/dist/index.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 0;
            background: #f5f7fa;
        }
        .demo-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px 0;
            text-align: center;
            box-shadow: 0 2px 12px rgba(0,0,0,0.1);
        }
        .demo-content {
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        .demo-section {
            background: white;
            border-radius: 8px;
            padding: 24px;
            margin-bottom: 20px;
            box-shadow: 0 2px 12px rgba(0,0,0,0.1);
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 20px;
        }
        .stat-card {
            text-align: center;
            padding: 20px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-radius: 8px;
        }
        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 5px;
        }
        .login-demo {
            max-width: 400px;
            margin: 0 auto;
        }
        .section-title {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 16px;
            color: #303133;
            border-bottom: 2px solid #409eff;
            padding-bottom: 8px;
        }
    </style>
</head>
<body>
    <div id="app">
        <!-- é¡µé¢å¤´éƒ¨ -->
        <div class="demo-header">
            <h1>ğŸ›¡ï¸ RBACæƒé™ç®¡ç†ç³»ç»Ÿ - å®é™…åŠŸèƒ½æ¼”ç¤º</h1>
            <p>åŸºäºVue 3 + Element Plusçš„çœŸå®åŠŸèƒ½å±•ç¤º</p>
        </div>

        <!-- å¯¼èˆªæ  -->
        <div style="background: white; border-bottom: 1px solid #e4e7ed; padding: 0 20px;">
            <el-menu mode="horizontal" :default-active="activeTab" @select="handleTabSelect">
                <el-menu-item index="login">ğŸ” ç™»å½•æ¼”ç¤º</el-menu-item>
                <el-menu-item index="dashboard">ğŸ“Š ä»ªè¡¨æ¿</el-menu-item>
                <el-menu-item index="users">ğŸ‘¥ ç”¨æˆ·ç®¡ç†</el-menu-item>
                <el-menu-item index="roles">ğŸ­ è§’è‰²ç®¡ç†</el-menu-item>
                <el-menu-item index="permissions">ğŸ”‘ æƒé™ç®¡ç†</el-menu-item>
                <el-menu-item index="profile">ğŸ‘¤ ä¸ªäººä¸­å¿ƒ</el-menu-item>
            </el-menu>
        </div>

        <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
        <div class="demo-content">
            <!-- ç™»å½•æ¼”ç¤º -->
            <div v-show="activeTab === 'login'" class="demo-section">
                <h2 class="section-title">ğŸ” ç”¨æˆ·ç™»å½•æ¼”ç¤º</h2>
                <div class="login-demo">
                    <el-card>
                        <template #header>
                            <div style="text-align: center;">
                                <h3>ç³»ç»Ÿç™»å½•</h3>
                            </div>
                        </template>
                        <el-form :model="loginForm" ref="loginFormRef">
                            <el-form-item>
                                <el-input 
                                    v-model="loginForm.username" 
                                    placeholder="è¯·è¾“å…¥ç”¨æˆ·å"
                                    size="large"
                                    prefix-icon="User">
                                </el-input>
                            </el-form-item>
                            <el-form-item>
                                <el-input 
                                    v-model="loginForm.password" 
                                    type="password" 
                                    placeholder="è¯·è¾“å…¥å¯†ç "
                                    size="large"
                                    prefix-icon="Lock"
                                    show-password>
                                </el-input>
                            </el-form-item>
                            <el-form-item>
                                <el-checkbox v-model="loginForm.remember">è®°ä½ç™»å½•çŠ¶æ€</el-checkbox>
                            </el-form-item>
                            <el-form-item>
                                <el-button 
                                    type="primary" 
                                    size="large" 
                                    style="width: 100%"
                                    :loading="loginLoading"
                                    @click="handleLogin">
                                    ç™»å½•
                                </el-button>
                            </el-form-item>
                        </el-form>
                        <div style="text-align: center; margin-top: 16px;">
                            <el-text type="info" size="small">
                                æ¼”ç¤ºè´¦å·ï¼šadmin/123456 æˆ– user/123456
                            </el-text>
                        </div>
                    </el-card>
                </div>
            </div>

            <!-- ä»ªè¡¨æ¿æ¼”ç¤º -->
            <div v-show="activeTab === 'dashboard'" class="demo-section">
                <h2 class="section-title">ğŸ“Š ä»ªè¡¨æ¿æ¼”ç¤º</h2>
                
                <!-- ç»Ÿè®¡å¡ç‰‡ -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number">{{ dashboardData.userCount }}</div>
                        <div>ç”¨æˆ·æ€»æ•°</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">{{ dashboardData.roleCount }}</div>
                        <div>è§’è‰²æ€»æ•°</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">{{ dashboardData.permissionCount }}</div>
                        <div>æƒé™æ€»æ•°</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">{{ dashboardData.onlineCount }}</div>
                        <div>åœ¨çº¿ç”¨æˆ·</div>
                    </div>
                </div>

                <!-- å›¾è¡¨åŒºåŸŸ -->
                <el-row :gutter="20">
                    <el-col :span="12">
                        <el-card>
                            <template #header>
                                <span>ç”¨æˆ·çŠ¶æ€åˆ†å¸ƒ</span>
                            </template>
                            <div style="height: 200px; display: flex; align-items: center; justify-content: center;">
                                <div style="text-align: center;">
                                    <el-progress type="circle" :percentage="75" status="success">
                                        <span>æ´»è·ƒç”¨æˆ·</span>
                                    </el-progress>
                                    <div style="margin-top: 10px;">75% ç”¨æˆ·æ´»è·ƒ</div>
                                </div>
                            </div>
                        </el-card>
                    </el-col>
                    <el-col :span="12">
                        <el-card>
                            <template #header>
                                <span>ç³»ç»Ÿè®¿é—®è¶‹åŠ¿</span>
                            </template>
                            <div style="height: 200px; display: flex; align-items: center; justify-content: center;">
                                <div style="width: 100%;">
                                    <div v-for="(item, index) in trendData" :key="index" style="margin-bottom: 10px;">
                                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                            <span>{{ item.date }}</span>
                                            <span>{{ item.count }}</span>
                                        </div>
                                        <el-progress :percentage="item.percentage" :show-text="false"></el-progress>
                                    </div>
                                </div>
                            </div>
                        </el-card>
                    </el-col>
                </el-row>
            </div>

            <!-- ç”¨æˆ·ç®¡ç†æ¼”ç¤º -->
            <div v-show="activeTab === 'users'" class="demo-section">
                <h2 class="section-title">ğŸ‘¥ ç”¨æˆ·ç®¡ç†æ¼”ç¤º</h2>
                
                <!-- æ“ä½œæ  -->
                <div style="margin-bottom: 16px; display: flex; justify-content: space-between; align-items: center;">
                    <div>
                        <el-input 
                            v-model="userSearch" 
                            placeholder="æœç´¢ç”¨æˆ·..." 
                            style="width: 300px; margin-right: 10px;"
                            prefix-icon="Search">
                        </el-input>
                        <el-button type="primary" @click="handleAddUser">
                            æ–°å¢ç”¨æˆ·
                        </el-button>
                    </div>
                    <div>
                        <el-button @click="handleBatchDelete" :disabled="selectedUsers.length === 0">
                            æ‰¹é‡åˆ é™¤
                        </el-button>
                    </div>
                </div>

                <!-- ç”¨æˆ·è¡¨æ ¼ -->
                <el-table 
                    :data="filteredUsers" 
                    stripe 
                    @selection-change="handleSelectionChange"
                    style="width: 100%">
                    <el-table-column type="selection" width="55"></el-table-column>
                    <el-table-column prop="id" label="ID" width="80"></el-table-column>
                    <el-table-column prop="name" label="å§“å" width="120"></el-table-column>
                    <el-table-column prop="username" label="ç”¨æˆ·å" width="120"></el-table-column>
                    <el-table-column prop="email" label="é‚®ç®±" width="200"></el-table-column>
                    <el-table-column prop="roles" label="è§’è‰²" width="150">
                        <template #default="{ row }">
                            <el-tag v-for="role in row.roles" :key="role" size="small" style="margin-right: 5px;">
                                {{ role }}
                            </el-tag>
                        </template>
                    </el-table-column>
                    <el-table-column prop="status" label="çŠ¶æ€" width="100">
                        <template #default="{ row }">
                            <el-tag :type="row.status === 'å¯ç”¨' ? 'success' : 'danger'" size="small">
                                {{ row.status }}
                            </el-tag>
                        </template>
                    </el-table-column>
                    <el-table-column label="æ“ä½œ" width="200">
                        <template #default="{ row }">
                            <el-button size="small" @click="handleEditUser(row)">ç¼–è¾‘</el-button>
                            <el-button size="small" type="warning" @click="handleAssignRole(row)">åˆ†é…è§’è‰²</el-button>
                            <el-button size="small" type="danger" @click="handleDeleteUser(row)">åˆ é™¤</el-button>
                        </template>
                    </el-table-column>
                </el-table>

                <!-- åˆ†é¡µ -->
                <div style="margin-top: 16px; text-align: right;">
                    <el-pagination
                        v-model:current-page="userCurrentPage"
                        v-model:page-size="userPageSize"
                        :page-sizes="[10, 20, 50, 100]"
                        :total="users.length"
                        layout="total, sizes, prev, pager, next, jumper">
                    </el-pagination>
                </div>
            </div>

            <!-- è§’è‰²ç®¡ç†æ¼”ç¤º -->
            <div v-show="activeTab === 'roles'" class="demo-section">
                <h2 class="section-title">ğŸ­ è§’è‰²ç®¡ç†æ¼”ç¤º</h2>

                <el-row :gutter="20">
                    <el-col :span="12">
                        <el-card>
                            <template #header>
                                <div style="display: flex; justify-content: space-between; align-items: center;">
                                    <span>è§’è‰²åˆ—è¡¨</span>
                                    <el-button size="small" type="primary" @click="handleAddRole">æ–°å¢è§’è‰²</el-button>
                                </div>
                            </template>
                            <el-table :data="roles" @row-click="handleRoleSelect" highlight-current-row>
                                <el-table-column prop="name" label="è§’è‰²åç§°"></el-table-column>
                                <el-table-column prop="userCount" label="ç”¨æˆ·æ•°" width="80"></el-table-column>
                                <el-table-column prop="permissionCount" label="æƒé™æ•°" width="80"></el-table-column>
                                <el-table-column label="æ“ä½œ" width="120">
                                    <template #default="{ row }">
                                        <el-button size="small" @click.stop="handleEditRole(row)">ç¼–è¾‘</el-button>
                                        <el-button size="small" type="danger" @click.stop="handleDeleteRole(row)">åˆ é™¤</el-button>
                                    </template>
                                </el-table-column>
                            </el-table>
                        </el-card>
                    </el-col>
                    <el-col :span="12">
                        <el-card>
                            <template #header>
                                <span>æƒé™åˆ†é… - {{ selectedRole?.name || 'è¯·é€‰æ‹©è§’è‰²' }}</span>
                            </template>
                            <div v-if="selectedRole" style="padding: 20px;">
                                <p>ä¸ºè§’è‰² <strong>{{ selectedRole.name }}</strong> åˆ†é…æƒé™ï¼š</p>
                                <el-checkbox-group v-model="selectedPermissions">
                                    <div v-for="permission in availablePermissions" :key="permission.id" style="margin-bottom: 8px;">
                                        <el-checkbox :label="permission.id">{{ permission.name }}</el-checkbox>
                                    </div>
                                </el-checkbox-group>
                                <div style="margin-top: 16px;">
                                    <el-button @click="handleSavePermissions" type="primary">ä¿å­˜æƒé™</el-button>
                                </div>
                            </div>
                            <div v-else style="text-align: center; padding: 40px; color: #909399;">
                                è¯·ä»å·¦ä¾§é€‰æ‹©ä¸€ä¸ªè§’è‰²æ¥åˆ†é…æƒé™
                            </div>
                        </el-card>
                    </el-col>
                </el-row>
            </div>

            <!-- æƒé™ç®¡ç†æ¼”ç¤º -->
            <div v-show="activeTab === 'permissions'" class="demo-section">
                <h2 class="section-title">ğŸ”‘ æƒé™ç®¡ç†æ¼”ç¤º</h2>

                <el-row :gutter="20">
                    <el-col :span="8">
                        <el-card>
                            <template #header>
                                <div style="display: flex; justify-content: space-between; align-items: center;">
                                    <span>æƒé™æ ‘</span>
                                    <el-input
                                        v-model="permissionSearch"
                                        placeholder="æœç´¢æƒé™..."
                                        size="small"
                                        style="width: 150px;">
                                    </el-input>
                                </div>
                            </template>
                            <div style="max-height: 300px; overflow-y: auto;">
                                <el-tree
                                    :data="permissionTree"
                                    :props="{ children: 'children', label: 'name' }"
                                    @node-click="handlePermissionSelect">
                                </el-tree>
                            </div>
                        </el-card>
                    </el-col>
                    <el-col :span="16">
                        <el-card>
                            <template #header>
                                <span>æƒé™è¯¦æƒ…</span>
                            </template>
                            <div v-if="selectedPermission">
                                <el-descriptions :column="2" border>
                                    <el-descriptions-item label="æƒé™åç§°">{{ selectedPermission.name }}</el-descriptions-item>
                                    <el-descriptions-item label="æƒé™ä»£ç ">{{ selectedPermission.code }}</el-descriptions-item>
                                    <el-descriptions-item label="æƒé™ç±»å‹">{{ selectedPermission.type }}</el-descriptions-item>
                                    <el-descriptions-item label="æƒé™çŠ¶æ€">
                                        <el-tag :type="selectedPermission.status === 'å¯ç”¨' ? 'success' : 'danger'">
                                            {{ selectedPermission.status }}
                                        </el-tag>
                                    </el-descriptions-item>
                                    <el-descriptions-item label="æƒé™æè¿°" :span="2">{{ selectedPermission.description }}</el-descriptions-item>
                                </el-descriptions>

                                <div style="margin-top: 20px;">
                                    <h4>å…³è”è§’è‰²</h4>
                                    <div style="margin-top: 10px;">
                                        <el-tag v-for="role in selectedPermission.relatedRoles" :key="role" style="margin-right: 8px;">
                                            {{ role }}
                                        </el-tag>
                                    </div>
                                </div>
                            </div>
                            <div v-else style="text-align: center; padding: 40px; color: #909399;">
                                è¯·ä»å·¦ä¾§æƒé™æ ‘é€‰æ‹©ä¸€ä¸ªæƒé™æŸ¥çœ‹è¯¦æƒ…
                            </div>
                        </el-card>
                    </el-col>
                </el-row>
            </div>

            <!-- ä¸ªäººä¸­å¿ƒæ¼”ç¤º -->
            <div v-show="activeTab === 'profile'" class="demo-section">
                <h2 class="section-title">ğŸ‘¤ ä¸ªäººä¸­å¿ƒæ¼”ç¤º</h2>

                <el-row :gutter="20">
                    <el-col :span="8">
                        <el-card>
                            <template #header>
                                <span>ä¸ªäººä¿¡æ¯</span>
                            </template>
                            <div style="text-align: center; margin-bottom: 20px;">
                                <div style="width: 80px; height: 80px; margin: 0 auto 10px; background: #409eff; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 24px; font-weight: bold;">
                                    {{ currentUser.name.charAt(0) }}
                                </div>
                                <h3>{{ currentUser.name }}</h3>
                                <p style="color: #909399;">{{ currentUser.role }}</p>
                            </div>
                            <el-descriptions :column="1" border>
                                <el-descriptions-item label="ç”¨æˆ·å">{{ currentUser.username }}</el-descriptions-item>
                                <el-descriptions-item label="é‚®ç®±">{{ currentUser.email }}</el-descriptions-item>
                                <el-descriptions-item label="æ‰‹æœº">{{ currentUser.phone }}</el-descriptions-item>
                                <el-descriptions-item label="éƒ¨é—¨">{{ currentUser.department }}</el-descriptions-item>
                                <el-descriptions-item label="æœ€åç™»å½•">{{ currentUser.lastLogin }}</el-descriptions-item>
                            </el-descriptions>
                        </el-card>
                    </el-col>
                    <el-col :span="16">
                        <el-tabs v-model="profileActiveTab">
                            <el-tab-pane label="ç¼–è¾‘ä¿¡æ¯" name="edit">
                                <el-form :model="profileForm" label-width="100px">
                                    <el-form-item label="å§“å">
                                        <el-input v-model="profileForm.name"></el-input>
                                    </el-form-item>
                                    <el-form-item label="é‚®ç®±">
                                        <el-input v-model="profileForm.email"></el-input>
                                    </el-form-item>
                                    <el-form-item label="æ‰‹æœº">
                                        <el-input v-model="profileForm.phone"></el-input>
                                    </el-form-item>
                                    <el-form-item label="éƒ¨é—¨">
                                        <el-select v-model="profileForm.department" style="width: 100%;">
                                            <el-option label="æŠ€æœ¯éƒ¨" value="æŠ€æœ¯éƒ¨"></el-option>
                                            <el-option label="äº§å“éƒ¨" value="äº§å“éƒ¨"></el-option>
                                            <el-option label="è¿è¥éƒ¨" value="è¿è¥éƒ¨"></el-option>
                                        </el-select>
                                    </el-form-item>
                                    <el-form-item>
                                        <el-button type="primary" @click="handleUpdateProfile">ä¿å­˜ä¿®æ”¹</el-button>
                                        <el-button @click="handleResetProfile">é‡ç½®</el-button>
                                    </el-form-item>
                                </el-form>
                            </el-tab-pane>
                            <el-tab-pane label="ä¿®æ”¹å¯†ç " name="password">
                                <el-form :model="passwordForm" label-width="100px">
                                    <el-form-item label="åŸå¯†ç ">
                                        <el-input v-model="passwordForm.oldPassword" type="password" show-password></el-input>
                                    </el-form-item>
                                    <el-form-item label="æ–°å¯†ç ">
                                        <el-input v-model="passwordForm.newPassword" type="password" show-password></el-input>
                                    </el-form-item>
                                    <el-form-item label="ç¡®è®¤å¯†ç ">
                                        <el-input v-model="passwordForm.confirmPassword" type="password" show-password></el-input>
                                    </el-form-item>
                                    <el-form-item>
                                        <el-button type="primary" @click="handleChangePassword">ä¿®æ”¹å¯†ç </el-button>
                                    </el-form-item>
                                </el-form>
                            </el-tab-pane>
                        </el-tabs>
                    </el-col>
                </el-row>
            </div>
        </div>
    </div>

    <!-- Vue 3 -->
    <script src="https://cdn.jsdelivr.net/npm/vue@3.4.15/dist/vue.global.js"></script>
    <!-- Element Plus JS -->
    <script src="https://cdn.jsdelivr.net/npm/element-plus@2.4.4/dist/index.full.js"></script>

    <script>
        const { createApp } = Vue;
        const { ElMessage, ElMessageBox } = ElementPlus;

        createApp({
            data() {
                return {
                    activeTab: 'login',
                    loginLoading: false,
                    userSearch: '',
                    selectedUsers: [],
                    selectedRole: null,
                    selectedPermission: null,
                    userCurrentPage: 1,
                    userPageSize: 10,
                    profileActiveTab: 'edit',
                    
                    loginForm: {
                        username: '',
                        password: '',
                        remember: false
                    },
                    
                    dashboardData: {
                        userCount: 156,
                        roleCount: 8,
                        permissionCount: 45,
                        onlineCount: 23
                    },
                    
                    trendData: [
                        { date: 'ä»Šå¤©', count: 128, percentage: 85 },
                        { date: 'æ˜¨å¤©', count: 95, percentage: 63 },
                        { date: 'å‰å¤©', count: 142, percentage: 95 },
                        { date: '3å¤©å‰', count: 76, percentage: 51 }
                    ],
                    
                    users: [
                        { id: 1, name: 'å¼ ä¸‰', username: 'zhangsan', email: 'zhangsan@example.com', roles: ['ç®¡ç†å‘˜'], status: 'å¯ç”¨', createTime: '2024-01-15 10:30:00' },
                        { id: 2, name: 'æå››', username: 'lisi', email: 'lisi@example.com', roles: ['ç¼–è¾‘è€…'], status: 'å¯ç”¨', createTime: '2024-01-16 14:20:00' },
                        { id: 3, name: 'ç‹äº”', username: 'wangwu', email: 'wangwu@example.com', roles: ['æŸ¥çœ‹è€…'], status: 'ç¦ç”¨', createTime: '2024-01-17 09:15:00' },
                        { id: 4, name: 'èµµå…­', username: 'zhaoliu', email: 'zhaoliu@example.com', roles: ['ç¼–è¾‘è€…', 'å®¡æ ¸è€…'], status: 'å¯ç”¨', createTime: '2024-01-18 16:45:00' },
                        { id: 5, name: 'é’±ä¸ƒ', username: 'qianqi', email: 'qianqi@example.com', roles: ['æŸ¥çœ‹è€…'], status: 'å¯ç”¨', createTime: '2024-01-19 11:30:00' }
                    ],

                    roles: [
                        { id: 1, name: 'ç³»ç»Ÿç®¡ç†å‘˜', userCount: 2, permissionCount: 45, permissions: [1, 2, 3, 4, 5, 6] },
                        { id: 2, name: 'éƒ¨é—¨ç»ç†', userCount: 5, permissionCount: 25, permissions: [1, 2, 3, 5] },
                        { id: 3, name: 'æ™®é€šç”¨æˆ·', userCount: 149, permissionCount: 8, permissions: [1, 5] }
                    ],

                    availablePermissions: [
                        { id: 1, name: 'æŸ¥çœ‹ç”¨æˆ·' },
                        { id: 2, name: 'æ–°å¢ç”¨æˆ·' },
                        { id: 3, name: 'ç¼–è¾‘ç”¨æˆ·' },
                        { id: 4, name: 'åˆ é™¤ç”¨æˆ·' },
                        { id: 5, name: 'æŸ¥çœ‹è§’è‰²' },
                        { id: 6, name: 'åˆ†é…æƒé™' }
                    ],

                    permissionTree: [
                        {
                            id: 1,
                            name: 'ç”¨æˆ·ç®¡ç†',
                            code: 'user',
                            type: 'æ¨¡å—',
                            status: 'å¯ç”¨',
                            description: 'ç”¨æˆ·ä¿¡æ¯ç®¡ç†æ¨¡å—',
                            relatedRoles: ['ç³»ç»Ÿç®¡ç†å‘˜', 'éƒ¨é—¨ç»ç†'],
                            children: [
                                { id: 2, name: 'æŸ¥çœ‹ç”¨æˆ·', code: 'user:view', type: 'æ“ä½œ', status: 'å¯ç”¨', description: 'æŸ¥çœ‹ç”¨æˆ·åˆ—è¡¨å’Œè¯¦æƒ…', relatedRoles: ['ç³»ç»Ÿç®¡ç†å‘˜', 'éƒ¨é—¨ç»ç†', 'æ™®é€šç”¨æˆ·'] },
                                { id: 3, name: 'æ–°å¢ç”¨æˆ·', code: 'user:create', type: 'æ“ä½œ', status: 'å¯ç”¨', description: 'åˆ›å»ºæ–°ç”¨æˆ·', relatedRoles: ['ç³»ç»Ÿç®¡ç†å‘˜'] },
                                { id: 4, name: 'ç¼–è¾‘ç”¨æˆ·', code: 'user:edit', type: 'æ“ä½œ', status: 'å¯ç”¨', description: 'ç¼–è¾‘ç”¨æˆ·ä¿¡æ¯', relatedRoles: ['ç³»ç»Ÿç®¡ç†å‘˜', 'éƒ¨é—¨ç»ç†'] },
                                { id: 5, name: 'åˆ é™¤ç”¨æˆ·', code: 'user:delete', type: 'æ“ä½œ', status: 'å¯ç”¨', description: 'åˆ é™¤ç”¨æˆ·', relatedRoles: ['ç³»ç»Ÿç®¡ç†å‘˜'] }
                            ]
                        },
                        {
                            id: 6,
                            name: 'è§’è‰²ç®¡ç†',
                            code: 'role',
                            type: 'æ¨¡å—',
                            status: 'å¯ç”¨',
                            description: 'è§’è‰²æƒé™ç®¡ç†æ¨¡å—',
                            relatedRoles: ['ç³»ç»Ÿç®¡ç†å‘˜'],
                            children: [
                                { id: 7, name: 'æŸ¥çœ‹è§’è‰²', code: 'role:view', type: 'æ“ä½œ', status: 'å¯ç”¨', description: 'æŸ¥çœ‹è§’è‰²åˆ—è¡¨', relatedRoles: ['ç³»ç»Ÿç®¡ç†å‘˜', 'éƒ¨é—¨ç»ç†'] },
                                { id: 8, name: 'åˆ†é…æƒé™', code: 'role:assign', type: 'æ“ä½œ', status: 'å¯ç”¨', description: 'ä¸ºè§’è‰²åˆ†é…æƒé™', relatedRoles: ['ç³»ç»Ÿç®¡ç†å‘˜'] }
                            ]
                        }
                    ],

                    currentUser: {
                        name: 'å¼ ä¸‰',
                        username: 'zhangsan',
                        email: 'zhangsan@example.com',
                        phone: '13800138000',
                        department: 'æŠ€æœ¯éƒ¨',
                        role: 'ç³»ç»Ÿç®¡ç†å‘˜',
                        lastLogin: '2024-01-20 09:30:00'
                    },

                    profileForm: {
                        name: 'å¼ ä¸‰',
                        email: 'zhangsan@example.com',
                        phone: '13800138000',
                        department: 'æŠ€æœ¯éƒ¨'
                    },

                    passwordForm: {
                        oldPassword: '',
                        newPassword: '',
                        confirmPassword: ''
                    },

                    selectedPermissions: [],
                    permissionSearch: ''
                };
            },

            computed: {
                filteredUsers() {
                    if (!this.userSearch) return this.users;
                    return this.users.filter(user =>
                        user.name.includes(this.userSearch) ||
                        user.username.includes(this.userSearch) ||
                        user.email.includes(this.userSearch)
                    );
                }
            },

            methods: {
                handleTabSelect(key) {
                    this.activeTab = key;
                },

                async handleLogin() {
                    if (!this.loginForm.username || !this.loginForm.password) {
                        ElMessage.warning('è¯·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ');
                        return;
                    }

                    this.loginLoading = true;

                    setTimeout(() => {
                        ElMessage.success('ç™»å½•æˆåŠŸï¼');
                        this.activeTab = 'dashboard';
                        this.loginLoading = false;
                    }, 1000);
                },

                handleAddUser() {
                    ElMessage.info('æ‰“å¼€æ–°å¢ç”¨æˆ·å¯¹è¯æ¡†');
                },

                handleEditUser(row) {
                    ElMessage.info(`ç¼–è¾‘ç”¨æˆ·: ${row.name}`);
                },

                handleDeleteUser(row) {
                    ElMessageBox.confirm(`ç¡®å®šè¦åˆ é™¤ç”¨æˆ· ${row.name} å—ï¼Ÿ`, 'ç¡®è®¤åˆ é™¤', {
                        type: 'warning'
                    }).then(() => {
                        ElMessage.success('åˆ é™¤æˆåŠŸ');
                    }).catch(() => {
                        ElMessage.info('å·²å–æ¶ˆåˆ é™¤');
                    });
                },

                handleAssignRole(row) {
                    ElMessage.info(`ä¸ºç”¨æˆ· ${row.name} åˆ†é…è§’è‰²`);
                },

                handleBatchDelete() {
                    if (this.selectedUsers.length === 0) {
                        ElMessage.warning('è¯·é€‰æ‹©è¦åˆ é™¤çš„ç”¨æˆ·');
                        return;
                    }
                    ElMessage.info(`æ‰¹é‡åˆ é™¤ ${this.selectedUsers.length} ä¸ªç”¨æˆ·`);
                },

                handleSelectionChange(selection) {
                    this.selectedUsers = selection;
                },

                handleAddRole() {
                    ElMessage.info('æ‰“å¼€æ–°å¢è§’è‰²å¯¹è¯æ¡†');
                },

                handleEditRole(row) {
                    ElMessage.info(`ç¼–è¾‘è§’è‰²: ${row.name}`);
                },

                handleDeleteRole(row) {
                    ElMessage.info(`åˆ é™¤è§’è‰²: ${row.name}`);
                },

                handleRoleSelect(row) {
                    this.selectedRole = row;
                    this.selectedPermissions = row.permissions || [];
                },

                handleSavePermissions() {
                    ElMessage.success('æƒé™ä¿å­˜æˆåŠŸ');
                },

                handlePermissionSelect(data) {
                    this.selectedPermission = data;
                },

                handleUpdateProfile() {
                    ElMessage.success('ä¸ªäººä¿¡æ¯æ›´æ–°æˆåŠŸ');
                },

                handleResetProfile() {
                    Object.assign(this.profileForm, {
                        name: this.currentUser.name,
                        email: this.currentUser.email,
                        phone: this.currentUser.phone,
                        department: this.currentUser.department
                    });
                    ElMessage.info('è¡¨å•å·²é‡ç½®');
                },

                handleChangePassword() {
                    if (!this.passwordForm.oldPassword || !this.passwordForm.newPassword) {
                        ElMessage.warning('è¯·å¡«å†™å®Œæ•´çš„å¯†ç ä¿¡æ¯');
                        return;
                    }
                    if (this.passwordForm.newPassword !== this.passwordForm.confirmPassword) {
                        ElMessage.error('ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´');
                        return;
                    }
                    ElMessage.success('å¯†ç ä¿®æ”¹æˆåŠŸ');
                    Object.assign(this.passwordForm, {
                        oldPassword: '',
                        newPassword: '',
                        confirmPassword: ''
                    });
                }
            }
        }).use(ElementPlus).mount('#app');
    </script>
</body>
</html>
